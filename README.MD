# Установка и управление прокси-сервером Xray без GUI, через командную строку

Этот набор скриптов предназначен для быстрой установки, настройки и управления прокси-сервером Xray на Debian-подобных системах (например, Ubuntu).

## Скрипты

1. `xray-install.sh` - Основной скрипт для установки.
2. `xray-update.sh` - Скрипт для обновления ядра Xray и баз GeoIP.
3. `xray-uninstall.sh` - Скрипт для полного удаления Xray из системы.

Установка

```
wget -qO- https://raw.githubusercontent.com/dn1artego/xray/refs/heads/gemini/xray-install.sh | bash
```

Обновление

```
wget -qO- https://raw.githubusercontent.com/dn1artego/xray/refs/heads/gemini/xray-update.sh | bash
```

Удаление

```
wget -qO- https://raw.githubusercontent.com/dn1artego/xray/refs/heads/gemini/xray-uninstall.sh | bash
```

---

## 1. Установка с помощью `xray-install.sh`

Этот скрипт автоматически разворачивает полностью настроенный сервер Xray с современным протоколом **VLESS + Reality**.

### Что делает скрипт:

1. **Проверяет права доступа:** Убеждается, что запущен от имени `root`.
2. **Устанавливает зависимости:** Ставит `curl`, `jq` и `qrencode`.
3. **Оптимизирует сеть:** Включает алгоритм Google BBR для лучшей производительности.
4. **Устанавливает ядро Xray:** Использует официальный установщик.
5. **Проводит интерактивную настройку:**
   * Запрашивает у пользователя **домен для маскировки** трафика (по умолчанию `github.com`).
6. **Генерирует конфигурацию:** Создает `/usr/local/etc/xray/config.json` с вашими настройками и блокировкой рекламы, а также трафика из Китая, России и Ирана.
7. **Создает утилиты управления:** Добавляет в систему простые команды для управления пользователями.
8. **Запускает Xray** и выводит данные для подключения первого пользователя.

### Утилиты управления

* `mainuser`: Показывает ссылку и QR-код для основного пользователя.
* `newuser`: Создает нового пользователя.
* `rmuser`: Удаляет пользователя (кроме основного).
* `userlist`: Показывает список всех созданных пользователей.
* `sharelink`: Генерирует ссылку и QR-код для любого выбранного пользователя.

В вашей домашней директории также будет создан файл `xray_help.txt` с этим списком команд.

---

## 2. Обновление с помощью `xray-update.sh`

Этот скрипт предназначен для поддержания Xray в актуальном состоянии.

### Что делает скрипт:

1. **Обновляет ядро Xray** до последней стабильной версии.
2. **Обновляет базы данных** `geoip.dat` и `geosite.dat`.
3. **Перезапускает Xray**, чтобы применить обновления.

---

## 3. Удаление с помощью `xray-uninstall.sh`

Этот скрипт полностью удаляет все компоненты, установленные `xray-install.sh`.

### Что делает скрипт:

1. **Запрашивает подтверждение** на удаление.
2. **Останавливает и удаляет** службу Xray.
3. **Запускает официальный деинсталлятор**, который удаляет ядро и конфигурационные файлы.
4. **Удаляет все утилиты управления** (`newuser`, `rmuser` и т.д.).
5. **Удаляет файл с подсказками** `xray_help.txt`.

## Ссылка на исходный репозиторий

```
https://github.com/ServerTechnologies/simple-xray-core
```